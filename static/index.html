<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Agutech Zoom Pro</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/livekit-client/dist/livekit-client.umd.min.js"></script>
</head>
<body>
    <div id="dashboard-screen" class="auth-box">
        <img src="/static/logo.jpg" class="app-logo">
        <input type="text" id="username" placeholder="Your Full Name">
        <div class="tab-switcher">
            <button id="btn-h" class="active" onclick="showTab('host')">Host</button>
            <button id="btn-j" onclick="showTab('join')">Join</button>
        </div>
        <div id="host-tab">
            <input type="text" id="m-title" placeholder="Meeting Title">
            <div class="date-section"><label>Start</label><input type="datetime-local" id="m-start" onchange="this.blur()"></div>
            <div class="date-section"><label>End</label><input type="datetime-local" id="m-end" onchange="this.blur()"></div>
            <button onclick="startMeeting(true)" class="btn host-btn">Start Meeting</button>
        </div>
        <div id="join-tab" style="display:none;">
            <input type="text" id="room-code-input" placeholder="8-Digit Code">
            <button onclick="joinMeeting()" class="btn join-btn">Join Now</button>
        </div>

        <div id="sound-hint" style="margin-top:10px; font-size:12px; color:#555;">
            If sounds donâ€™t play, click/tap once anywhere after joining.
        </div>
    </div>

    <div id="meeting-room" style="display: none;">
        <div id="main-area">
            <div id="room-header">
                <div id="rec-status" class="rec-indicator"><div class="rec-dot"></div> REC</div>

                <!-- Host only shows the code; participants will see meeting title instead -->
                <div id="display-code">Code: ---</div>

                <button id="copy-btn" class="ctrl-btn" style="padding:5px 10px; font-size:11px;" onclick="copyCode()">Copy Code</button>
            </div>

            <div id="presentation-area"></div>
            <div id="video-grid"></div>

            <div id="controls">
                <button class="ctrl-btn" onclick="toggleMic()" id="mic-btn">Mute</button>
                <button class="ctrl-btn" onclick="toggleCam()" id="cam-btn">Video</button>
                <button class="ctrl-btn" onclick="toggleRecord()" id="rec-btn">Record</button>
                <button class="ctrl-btn share" onclick="shareScreen()" id="share-btn">Share</button>
                <button id="host-mute-btn" class="ctrl-btn mute-all" style="display:none;" onclick="muteAll()">Mute All</button>
                <button class="ctrl-btn hand" id="hand-btn" onclick="toggleHand()">âœ‹ Raise Hand</button>
                <button class="ctrl-btn" onclick="togglePanel('participant-panel')">Participants</button>
                <button class="ctrl-btn" onclick="togglePanel('chat-panel')">Chat</button>
                <button class="ctrl-btn leave" onclick="leaveRoom()">Leave</button>
            </div>

            <div id="participant-panel" class="floating-panel">
                <div class="panel-header" onmousedown="dragElement(this.parentElement)">
                    <span>Participants</span>
                    <button onclick="togglePanel('participant-panel')" style="color:white; border:none; background:none;">âœ•</button>
                </div>
                <div id="participant-list"></div>
            </div>

            <div id="chat-panel" class="floating-panel" style="right: 20px; bottom: 100px;">
                <div class="panel-header" onmousedown="dragElement(this.parentElement)">
                    <span>Chat</span>
                    <button onclick="togglePanel('chat-panel')" style="color:white; border:none; background:none;">âœ•</button>
                </div>
                <div id="chat-messages" style="flex:1; overflow-y:auto; padding:10px;"></div>
                <div id="chat-input-container" style="padding:10px; border-top:1px solid #eee; display:flex; gap:5px;">
                    <input type="text" id="chat-input" placeholder="Type..." onkeypress="handleChat(event)" style="flex:1;">
                    <label for="file-input" style="cursor:pointer; padding:5px;">ðŸ“Ž</label>
                    <input type="file" id="file-input" style="display:none;" onchange="sendFile(this)">
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/script.js"></script>
</body>
</html>
